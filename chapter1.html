<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MHT-CET Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e0f2fe;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .quiz-container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px 25px;
      position: relative;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
      color: #1e3a8a;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .question-number {
      font-weight: bold;
      color: #2563eb;
    }
    .question {
      font-size: 16px;
      margin: 20px 0;
    }
    .options input[type="radio"] {
      display: none;
    }
    .options label {
      display: block;
      background: #eff6ff;
      margin: 8px 0;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid transparent;
    }
    .options input[type="radio"]:checked + label {
      background: #dbeafe;
      border-left: 4px solid #2563eb;
      font-weight: 500;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .btn {
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
    }
    .btn:hover {
      background: #1e40af;
    }
    .btn.right {
      margin-left: auto;
    }
    
    /* Timer Styling */
    .timer {
      display: flex;
      align-items: center;
      gap: 5px;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: 500;
    }
    
    /* Question Navigation Panel */
    .nav-panel-toggle {
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .nav-panel {
      display: none;
      position: absolute;
      top: 50px;
      right: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      padding: 15px;
      z-index: 10;
      width: 250px;
      max-height: 300px;
      overflow-y: auto;
    }
    .nav-panel h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
      color: #2563eb;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    .question-list {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }
    .question-item {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .question-item.answered {
      background: #3b82f6;
      color: white;
    }
    .question-item.seen {
      background: #f87171;
      color: white;
    }
    .question-item.not-seen {
      background: #d1d5db;
      color: #6b7280;
    }
    .question-item.current {
      border: 2px solid #2563eb;
      box-sizing: border-box;
    }
    .question-item:hover {
      transform: scale(1.1);
    }
    
    /* Save notification */
    .save-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      display: none;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="header">
      <div class="header-left">
        <div>MHT CET 2025 · Units & Measurements</div>
      </div>
      <div class="header-right">
        <div class="timer">Time: <span id="timer">00:00</span></div>
        <div class="nav-panel-toggle" onclick="toggleNavPanel()">☰</div>
      </div>
    </div>
    
    <div class="nav-panel" id="navPanel">
      <h3>Questions</h3>
      <div class="question-list" id="questionList"></div>
    </div>

    <div id="quiz-content"></div>
    
    <div class="nav-buttons">
      <button class="btn" id="backBtn" onclick="prevQuestion()" style="display:none;">Back</button>
      <button class="btn right" id="nextBtn" onclick="nextQuestion()">Next</button>
      <button class="btn right" id="submitBtn" onclick="submitQuiz()" style="display:none;">Submit</button>
    </div>
  </div>

  <!-- Save notification -->
  <div class="save-notification" id="saveNotification">
    <span>Results saved successfully!</span>
    <button onclick="hideNotification()" style="background: none; border: none; color: white; cursor: pointer; font-size: 16px;">×</button>
  </div>

  <script>
    const questions = [
      {
        number: "Question 01",
        text: "The error in the measurement of length and mass is 3% and 4% respectively. The error in the measurement of density will be",
        options: ["6%", "13%", "9%", "15%"],
        correct: "C"
      },
      {
        number: "Question 02",
        text: "A force F is applied on a square plate of side L. If the percentage error in determining F is 3% and that in L is 2%, then the percentage error in determining the pressure is",
        options: ["7%", "5%", "3%", "2%"],
        correct: "A"
      },
      {
        number: "Question 03",
        text: "A wire has a mass 0.3 ± 0.003 gram, radius 0.5 ± 0.005 mm and length 6 ± 0.06 cm. The maximum percentage error in the measurement of its density is",
        options: ["2%", "5%", "4%", "3%"],
        correct: "B"
      },
      {
        number: "Question 04",
        text: "The pressure on a square plate is measured by measuring the force acting on the plate and length of the sides of the plate. The maximum error in the measurement of force and length are respectively 4% and 2%, the percentage error in the measurement of pressure is",
        options: ["1%", "2%", "6%", "8%"],
        correct: "C"
      },
      {
        number: "Question 05",
        text: "Which of the following comes under the category of random errors?",
        options: [
          "Improper calibration of thermometer",
          "Zero error of 1u V in voltmeter",
          "Student measures 22°, where as the correct angle is 20°",
          "Errors resulting from the fluctuations in electric power supply"
        ],
        correct: "C"
      },
      {
        number: "Question 06",
        text: "The percentage error in the measurement of mass and speed of a particular body is 3% and 4% respectively. The percentage error in the measurement of kinetic energy is",
        options: ["9%", "10%", "11%", "12%"],
        correct: "C"
      },
      {
        number: "Question 07",
        text: "The period of oscillating simple pendulum is T = 2π√(l/g) where length 'l' is 100 cm with error 1 mm. Period is 2 second. The time of 100 oscillations is measured by a stopwatch of least count 0.1s. The percentage error in gravitational acceleration 'g' is",
        options: ["0.2%", "0.1%", "1%", "2%"],
        correct: "A"
      },
      {
        number: "Question 08",
        text: "Error in the measurement of radius of the sphere is 2%. The error in the calculated value of its volume is",
        options: ["3%", "2%", "6%", "9%"],
        correct: "D"
      },
      {
        number: "Question 09",
        text: "A physical quantity A can be determined by measuring parameters B, C, D and E using the relation A = B^a * C^b / D * E^r. If the maximum errors in the measurement are b%, c%, d% and e% then maximum error in the value of A is",
        options: [
          "(ab + Bc - yd - de)%",
          "(b + c - d - e)%",
          "(ab + Bc + yd + de)%",
          "(b + c + d + e)%"
        ],
        correct: "C"
      },
      {
        number: "Question 10",
        text: "The density of a cube is measured by measuring its mass and length of its sides. The % error in the measurement of mass and length are 5% and 6% respectively. The percentage error in the measurement of density is",
        options: ["21%", "23%", "25%", "27%"],
        correct: "C"
      },
      {
        number: "Question 11",
        text: "A student measures time for 20 oscillations of a simple pendulum as 30 s, 32 s, 35 s and 35 s. If the minimum division in the measuring clock is 1 s, then correct mean time (in second) is",
        options: ["(33±2)", "(32±3)", "(33±3)", "(32±2)"],
        correct: "C"
      },
      {
        number: "Question 12",
        text: "If L is the inductance and R is the resistance then the SI unit of L/R is",
        options: ["second", "volt", "ampere", "per second"],
        correct: "A"
      },
      {
        number: "Question 13",
        text: "The initial and final temperatures of water as recorded by an observer are (38.6 ± 0.2)°C and (82.3 ± 0.3)°C. The rise in temperature with proper error limits is",
        options: ["(43.7 ± 0.2)°C", "(43.7 ± 0.3)°C", "(43.7 ± 0.1)°C", "(43.7 ± 0.5)°C"],
        correct: "D"
      },
      {
        number: "Question 14",
        text: "The formula for the physical quantity is P = x³y/z² and the percentage error in x, y, z are 0.6%, 3% and 1.3% respectively. The percentage error in P is",
        options: ["2.2%", "4.9%", "5.3%", "7.4%"],
        correct: "C"
      },
      {
        number: "Question 15",
        text: "Let x = (πR²(P² − Q²))/2, where P, Q and R are lengths. The physical quantity x is",
        options: ["area", "length", "volume", "velocity"],
        correct: "C"
      },
      {
        number: "Question 16",
        text: "Let σ and b be Stefan's constant and Wien's constant respectively, then dimensions of σb are",
        options: ["L¹M⁻¹T⁻³K⁻³", "L¹M¹T³K⁻³", "L⁻¹M¹T³K³", "L¹M¹T⁻³K⁻³"],
        correct: "A"
      },
      {
        number: "Question 17",
        text: "Let force F = A sin(Ct) + B cos(Dx), where x and t are displacement and time respectively. The dimensions of C are same as dimensions of",
        options: ["angular velocity", "velocity", "angular momentum", "velocity gradient"],
        correct: "A"
      },
      {
        number: "Question 18",
        text: "L²M¹T⁻² are the dimensions of",
        options: ["torque", "force", "angular acceleration", "angular momentum"],
        correct: "A"
      },
      {
        number: "Question 19",
        text: "The ratio of the dimensions of Planck's constant to that of moment of inertia is the dimensions of",
        options: ["angular momentum", "velocity", "frequency", "time"],
        correct: "C"
      },
      {
        number: "Question 20",
        text: "The dimensions of self or mutual inductance are given as",
        options: ["L²M¹T⁻²I⁻²", "L²M²T⁻²I⁻²", "L¹M¹T⁻²I⁻²", "L²M²T⁻²I⁻²"],
        correct: "C"
      },
      {
        number: "Question 21",
        text: "The force F acting on a body of density d are related by the relation F = Vd. The dimensions of V are",
        options: ["L⁻¹M²T²", "L⁻¹MT⁻²", "L⁻¹M¹T⁻²", "L¹M¹T²"],
        correct: "C"
      },
      {
        number: "Question 22",
        text: "Dimensions of Gyromagnetic ratio are",
        options: ["L¹M⁰T¹I¹", "L⁰M⁻¹T¹I¹", "L¹M⁰T⁰I⁻¹", "L⁻¹M⁰T¹I¹"],
        correct: "D"
      }
    ];

    let current = 0;
    const userAnswers = {};
    const seenQuestions = new Set();
    const startTime = new Date();
    let navPanelVisible = false;

    function renderQuestion(index) {
      const q = questions[index];
      const container = document.getElementById("quiz-content");
      container.innerHTML = `
        <div class="question-number">${q.number}</div>
        <div class="question">${q.text}</div>
        <div class="options">
          ${q.options.map((opt, i) => {
            const id = `q${index}_${String.fromCharCode(65 + i)}`;
            const checked = userAnswers[index] === String.fromCharCode(65 + i) ? "checked" : "";
            return `
              <input type="radio" id="${id}" name="mcq${index}" value="${String.fromCharCode(65 + i)}" ${checked}>
              <label for="${id}">${String.fromCharCode(65 + i)}) ${opt}</label>
            `;
          }).join("")}
        </div>
      `;

      seenQuestions.add(index);
      
      document.getElementById("backBtn").style.display = index === 0 ? "none" : "inline-block";
      document.getElementById("nextBtn").style.display = index === questions.length - 1 ? "none" : "inline-block";
      document.getElementById("submitBtn").style.display = index === questions.length - 1 ? "inline-block" : "none";
      
      updateNavPanel();
    }

    function updateNavPanel() {
      const questionList = document.getElementById("questionList");
      questionList.innerHTML = '';
      
      questions.forEach((q, index) => {
        const questionItem = document.createElement("div");
        questionItem.className = "question-item";
        questionItem.textContent = index + 1;
        
        if (userAnswers[index]) {
          questionItem.classList.add("answered");
        } else if (seenQuestions.has(index)) {
          questionItem.classList.add("seen");
        } else {
          questionItem.classList.add("not-seen");
        }
        
        if (index === current) {
          questionItem.classList.add("current");
        }
        
        questionItem.onclick = () => {
          saveAnswer();
          current = index;
          renderQuestion(current);
          toggleNavPanel();
        };
        
        questionList.appendChild(questionItem);
      });
    }

    function toggleNavPanel() {
      const navPanel = document.getElementById("navPanel");
      navPanelVisible = !navPanelVisible;
      navPanel.style.display = navPanelVisible ? "block" : "none";
    }

    function nextQuestion() {
      saveAnswer();
      if (current < questions.length - 1) {
        current++;
        renderQuestion(current);
      }
    }

    function prevQuestion() {
      saveAnswer();
      if (current > 0) {
        current--;
        renderQuestion(current);
      }
    }

    function saveAnswer() {
      const selected = document.querySelector(`input[name="mcq${current}"]:checked`);
      if (selected) {
        userAnswers[current] = selected.value;
      }
    }

    function submitQuiz() {
      saveAnswer();
      
      // Generate test name with timestamp
      const now = new Date();
      const testName = `MHT-CET Test ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
      
      const endTime = new Date();
      const timeTakenMs = endTime - startTime;
      const timeTakenMin = Math.floor(timeTakenMs / 60000);
      const timeTakenSec = Math.floor((timeTakenMs % 60000) / 1000);

      let correct = 0;
      const results = [];

      questions.forEach((q, i) => {
        const userAns = userAnswers[i] || "Not Answered";
        const isCorrect = userAns === q.correct;
        if (isCorrect) correct++;
        results.push({
          number: q.number,
          userAns,
          correctAns: q.correct,
          isCorrect
        });
      });

      // Create result object
      const resultData = {
        testName: testName,
        total: questions.length,
        correct: correct,
        accuracy: (correct / questions.length * 100).toFixed(2),
        time: `${timeTakenMin} min ${timeTakenSec} sec`,
        timestamp: now.toISOString(),
        details: results
      };

      // Save to localStorage
      try {
        // Get existing scores or initialize empty array
        let scores = JSON.parse(localStorage.getItem("quizScores")) || [];
        
        // Add new score
        scores.push(resultData);
        
        // Save back to localStorage
        localStorage.setItem("quizScores", JSON.stringify(scores));
        
        // Also save the current result for the result page
        localStorage.setItem("quizResults", JSON.stringify(resultData));
        
        // Show save notification
        showNotification();
        
        // Redirect to results page after a short delay
        setTimeout(() => {
          window.location.href = "result.html";
        }, 1500);
      } catch (e) {
        console.error("Error saving results:", e);
        alert("Error saving results. Please try again.");
      }
    }

    function showNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "flex";
    }

    function hideNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "none";
    }

    // Initialize the quiz
    renderQuestion(current);

    // Stopwatch Timer
    let minutes = 0, seconds = 0;
    const timerEl = document.getElementById("timer");
    setInterval(() => {
      seconds++;
      if (seconds === 60) {
        seconds = 0;
        minutes++;
      }
      timerEl.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }, 1000);
  </script>
</body>
</html>